# System Design социальной сети для курса по System Design

## Функциональные требования
#### Пользователь должен иметь возможность: 
- Создавать пост с фотографиями, описанием и привязкой к конкретному месту
- Оценивать посты других пользователей
- Комментировать посты других пользователей
- Подписываться на других пользователей
- Просматривать активности пользователей, на которых он подписан
- Поиска популярных мест для путешествий
- Просмотра найденных в поиске постов с местами путешествий
- Просмотра ленты других путешественников
- Просмотра ленты пользователя, на которого он подписан в обратном хронологическом порядке

## Нефункциональные требования
- Daily active users:  1_000_000
- Аудитория стран СНГ
- Хранение данных всегда
- Доступность приложения 99.99
- Активность пользователей
    - В среднем пользователь в день:
        - Добавляет 5 постов
        - Оценивает 15 постов 
        - Комментирует 5 постов
        - Читает 25 комментариев
        - Ищет 20 постов
        - Просматривает 40 постов
- Лимиты
    - Максимальное количество фото в одном посте не более 5
    - Размер каждой фотографии не более 1 мб
    - Не более 50 постов в день
    - Количество подписчиков не ограничено
    - Количество подписок не ограничено
- Сезонность
    - В среднем пользователи в летнее время активней на 40%, чем в другие сезоны
- Тайминги(не более секунд)
    - Добавление поста 3
    - Добавление комментария 1
    - Поиск постов 2
    - Просмотр поста 1

## Оценка нагрузки
### Расчет RPS
#### Посты
- RPS(write) = 1_000_000 * 5 / 86400 = 57
- RPS(read) = 1_000_000 * 40 / 86400 = 463
#### Оценки
- RPS = 1_000_000 * 15 / 86400 = 173
#### Комментарии
- RPS(write) = 1_000_000 * 5 / 86400 = 57
- RPS(read) = 1_000_000 * 25 / 86400 = 289

### Расчет трафика
#### Посты
##### Сущность (2_501_032 byte)
- id 8 byte
- created_at 8 byte
- user_id 8 byte
- photos[] 2_500_000 byte
- description 1_000 byte
- geo_location 16 byte
##### Трафик в секунду
- Traffic(write) = 57 * 2_501_032 = 142_558_824 byte (0.142558824 gigabyte)
- Traffic(read) = 463 * 2_501_032 = 1_157_977_816 * 10 posts = 11_579_778_160 byte (11.57977816 gigabyte)

#### Оценки
##### Сущность (32 byte)
- id 8 byte
- post_id 8 byte
- user_id 8 byte
- created_at 8 byte
##### Трафик в секунду
- Traffic(write) = 173 * 32 = 5_536 byte

#### Комментарии
##### Сущность (532 byte)
- id 8 byte
- post_id 8 byte
- user_id 8 byte
- content 500 byte
- created_at 8 byte
##### Трафик в секунду
- Traffic(write) = 532 * 57 = 30_324 byte
- Traffic(read) = 532 * 289 = 153_748 * 20 comments = 3_074_960 byte

